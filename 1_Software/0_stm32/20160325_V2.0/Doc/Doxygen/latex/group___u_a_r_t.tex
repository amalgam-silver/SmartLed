\hypertarget{group___u_a_r_t}{\section{stm32\-\_\-uart\-: \-C\-P\-U \-Group}
\label{group___u_a_r_t}\index{stm32\-\_\-uart\-: C\-P\-U Group@{stm32\-\_\-uart\-: C\-P\-U Group}}
}
\subsection*{\-Data \-Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct_s_t_r___uart}{\-S\-T\-R\-\_\-\-Uart}
\begin{DoxyCompactList}\small\item\em 串口收发数据结构体 \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Defines}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group___u_a_r_t_gaa3d5bffde9e408292f931efff3860213}{\#define \hyperlink{group___u_a_r_t_gaa3d5bffde9e408292f931efff3860213}{\-U\-S\-A\-R\-T1\-\_\-\-D\-R\-\_\-\-Base}~0x40013804}\label{group___u_a_r_t_gaa3d5bffde9e408292f931efff3860213}

\begin{DoxyCompactList}\small\item\em 串口1数据寄存器地址 \end{DoxyCompactList}\item 
\hypertarget{group___u_a_r_t_ga24372e8f343b57a91bf48cdd2fd4a5dd}{\#define \hyperlink{group___u_a_r_t_ga24372e8f343b57a91bf48cdd2fd4a5dd}{\-U\-A\-R\-T\-\_\-\-B\-U\-F\-\_\-\-M\-A\-X}~200}\label{group___u_a_r_t_ga24372e8f343b57a91bf48cdd2fd4a5dd}

\begin{DoxyCompactList}\small\item\em 串口缓存区大小 \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group___u_a_r_t_gacf0df3a8e9e8a2adfd954a81e7a894ec}{typedef void($\ast$ \hyperlink{group___u_a_r_t_gacf0df3a8e9e8a2adfd954a81e7a894ec}{\-Uart\-Handler} )(\hyperlink{struct_s_t_r___uart}{\-S\-T\-R\-\_\-\-Uart} $\ast$uart)}\label{group___u_a_r_t_gacf0df3a8e9e8a2adfd954a81e7a894ec}

\begin{DoxyCompactList}\small\item\em 串口数据处理回调函数指针类型 \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{group___u_a_r_t_gaa4ad4280e1468dfe3e2f3c30cfe1947a}{\-Usart\-Init} (\hyperlink{group___b_s_p_ga9e6c91d77e24643b888dbd1a1a590054}{u16} baud)
\begin{DoxyCompactList}\small\item\em 初始化\-U\-A\-R\-T，使用uart1+\-D\-M\-A,按\-R\-T\-U格式收发数据 \end{DoxyCompactList}\item 
void \hyperlink{group___u_a_r_t_ga25d30fac5e8dbe52d5ba2b28e76beb03}{\-Rx\-Uart} (\hyperlink{group___u_a_r_t_gacf0df3a8e9e8a2adfd954a81e7a894ec}{\-Uart\-Handler} handle)
\begin{DoxyCompactList}\small\item\em \-U\-A\-R\-T1数据接收程序，每20ms执行一次，检查数据接收进度，如果大于4ms没有新的数据被接收， \par
 则认为，当前数据包接收结束，等待处理进程处理数据. 接收方式为\-D\-M\-A，数据包的分辨使用间隔时间分辨。 \end{DoxyCompactList}\item 
void \hyperlink{group___u_a_r_t_ga34c7b2209242d4a50fddc81065cabba1}{\-Tx\-Uart} (void)
\begin{DoxyCompactList}\small\item\em 串口1发送数据。 \end{DoxyCompactList}\item 
\hyperlink{group___b_s_p_gaed742c436da53c1080638ce6ef7d13de}{u8} \hyperlink{group___u_a_r_t_ga2b08673358b93138c1ca1e5585c1260e}{\-Get\-Send\-Stt} (void)
\begin{DoxyCompactList}\small\item\em 获取串口发送状态 \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group___u_a_r_t_ga51dfc3a415d9b974b2aee3ce3f695910}{\hyperlink{struct_s_t_r___uart}{\-S\-T\-R\-\_\-\-Uart} \hyperlink{group___u_a_r_t_ga51dfc3a415d9b974b2aee3ce3f695910}{\-Uart}}\label{group___u_a_r_t_ga51dfc3a415d9b974b2aee3ce3f695910}

\begin{DoxyCompactList}\small\item\em 串口结构体 \end{DoxyCompactList}\item 
\hypertarget{group___u_a_r_t_ga51dfc3a415d9b974b2aee3ce3f695910}{\hyperlink{struct_s_t_r___uart}{\-S\-T\-R\-\_\-\-Uart} \hyperlink{group___u_a_r_t_ga51dfc3a415d9b974b2aee3ce3f695910}{\-Uart}}\label{group___u_a_r_t_ga51dfc3a415d9b974b2aee3ce3f695910}

\begin{DoxyCompactList}\small\item\em 串口结构体 \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{\-Function \-Documentation}
\hypertarget{group___u_a_r_t_ga2b08673358b93138c1ca1e5585c1260e}{\index{stm32\-\_\-uart\-: C\-P\-U Group@{stm32\-\_\-uart\-: C\-P\-U Group}!\-Get\-Send\-Stt@{\-Get\-Send\-Stt}}
\index{\-Get\-Send\-Stt@{\-Get\-Send\-Stt}!stm32_uart: CPU Group@{stm32\-\_\-uart\-: C\-P\-U Group}}
\subsubsection[{\-Get\-Send\-Stt}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u8} {\bf \-Get\-Send\-Stt} (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{group___u_a_r_t_ga2b08673358b93138c1ca1e5585c1260e}


获取串口发送状态 


\begin{DoxyParams}{\-Parameters}
{\em 参数名} & 参数说明 \\
\hline
{\em 无} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{\-Return values}
{\em 0} & -\/ 正在发送 非0 -\/ 发送完成 \\
\hline
\end{DoxyRetVals}
\begin{DoxyParagraph}{使用全局变量}
无 \par
 
\end{DoxyParagraph}
\begin{DoxyNote}{\-Note}
● 执行时间\-: \par
 ● 调用周期\-: 触发调用 \par
 ● 可否打断\-: 可以 \par

\end{DoxyNote}
\begin{DoxyParagraph}{注意\-:}
● \par
 
\end{DoxyParagraph}


\-Here is the caller graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=238pt]{group___u_a_r_t_ga2b08673358b93138c1ca1e5585c1260e_icgraph}
\end{center}
\end{figure}


\hypertarget{group___u_a_r_t_ga25d30fac5e8dbe52d5ba2b28e76beb03}{\index{stm32\-\_\-uart\-: C\-P\-U Group@{stm32\-\_\-uart\-: C\-P\-U Group}!\-Rx\-Uart@{\-Rx\-Uart}}
\index{\-Rx\-Uart@{\-Rx\-Uart}!stm32_uart: CPU Group@{stm32\-\_\-uart\-: C\-P\-U Group}}
\subsubsection[{\-Rx\-Uart}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Rx\-Uart} (
\begin{DoxyParamCaption}
\item[{{\bf \-Uart\-Handler}}]{handle}
\end{DoxyParamCaption}
)}}\label{group___u_a_r_t_ga25d30fac5e8dbe52d5ba2b28e76beb03}


\-U\-A\-R\-T1数据接收程序，每20ms执行一次，检查数据接收进度，如果大于4ms没有新的数据被接收， \par
 则认为，当前数据包接收结束，等待处理进程处理数据. 接收方式为\-D\-M\-A，数据包的分辨使用间隔时间分辨。 

串口接收数据


\begin{DoxyParams}[1]{\-Parameters}
 & {\em 参数名} & 参数说明 \\
\hline
\mbox{\tt in}  & {\em handle} & 串口数据处理函数指针 \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{\-Return values}
{\em 无} & \\
\hline
\end{DoxyRetVals}
\begin{DoxyParagraph}{使用全局变量}
\-Uart\-: 串口1结构体 \par
 
\end{DoxyParagraph}
\begin{DoxyNote}{\-Note}
● 执行时间\-: \par
 ● 调用周期\-: 4ms \par
 ● 可否打断\-: 可以 \par

\end{DoxyNote}
\begin{DoxyParagraph}{注意\-:}
● \par
 
\end{DoxyParagraph}
\hypertarget{group___u_a_r_t_ga34c7b2209242d4a50fddc81065cabba1}{\index{stm32\-\_\-uart\-: C\-P\-U Group@{stm32\-\_\-uart\-: C\-P\-U Group}!\-Tx\-Uart@{\-Tx\-Uart}}
\index{\-Tx\-Uart@{\-Tx\-Uart}!stm32_uart: CPU Group@{stm32\-\_\-uart\-: C\-P\-U Group}}
\subsubsection[{\-Tx\-Uart}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Tx\-Uart} (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{group___u_a_r_t_ga34c7b2209242d4a50fddc81065cabba1}


串口1发送数据。 

串口发送数据


\begin{DoxyParams}{\-Parameters}
{\em 参数名} & 参数说明 \\
\hline
{\em 无} & \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{\-Return values}
{\em 无} & \\
\hline
\end{DoxyRetVals}
\begin{DoxyParagraph}{使用全局变量}
无 \par
 
\end{DoxyParagraph}
\begin{DoxyNote}{\-Note}
● 执行时间\-: \par
 ● 调用周期\-: 触发调用 \par
 ● 可否打断\-: 可以 \par

\end{DoxyNote}
\begin{DoxyParagraph}{注意\-:}
● 发送前先将要发送的数据放入缓冲区 \-Uart\mbox{[}\mbox{]}.tx\-Buf，赋值发送长度 \-Uart\mbox{[}\mbox{]}.t\-Ptr，将发送标志位\-Uart\mbox{[}\mbox{]}.tx\-Flg置1。 \par
 
\end{DoxyParagraph}


\-Here is the caller graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=216pt]{group___u_a_r_t_ga34c7b2209242d4a50fddc81065cabba1_icgraph}
\end{center}
\end{figure}


\hypertarget{group___u_a_r_t_gaa4ad4280e1468dfe3e2f3c30cfe1947a}{\index{stm32\-\_\-uart\-: C\-P\-U Group@{stm32\-\_\-uart\-: C\-P\-U Group}!\-Usart\-Init@{\-Usart\-Init}}
\index{\-Usart\-Init@{\-Usart\-Init}!stm32_uart: CPU Group@{stm32\-\_\-uart\-: C\-P\-U Group}}
\subsubsection[{\-Usart\-Init}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-Usart\-Init} (
\begin{DoxyParamCaption}
\item[{{\bf u16}}]{baud}
\end{DoxyParamCaption}
)}}\label{group___u_a_r_t_gaa4ad4280e1468dfe3e2f3c30cfe1947a}


初始化\-U\-A\-R\-T，使用uart1+\-D\-M\-A,按\-R\-T\-U格式收发数据 

初始化串口


\begin{DoxyParams}[1]{\-Parameters}
 & {\em 参数名} & 参数说明 \\
\hline
\mbox{\tt in}  & {\em baud} & usart1的波特率bps(2400$\sim$115200bps) \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{\-Return values}
{\em 无} & \\
\hline
\end{DoxyRetVals}
\begin{DoxyParagraph}{使用全局变量}
无 \par
 
\end{DoxyParagraph}
\begin{DoxyNote}{\-Note}
● 执行时间\-: \par
 ● 调用周期\-: 上电初始化 \par
 ● 可否打断\-: 可以 \par

\end{DoxyNote}
\begin{DoxyParagraph}{注意\-:}
● \par
 
\end{DoxyParagraph}


\-Here is the caller graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{group___u_a_r_t_gaa4ad4280e1468dfe3e2f3c30cfe1947a_icgraph}
\end{center}
\end{figure}


